# Copy this to .env and update the values
# cp env.sample .env

# =============================================================================
# SHARED BY: Docker Compose + Node.js App + Knex Migrations
# =============================================================================

# --- Environment ---
NODE_ENV=development

# Database Type (pg for PostgreSQL, sqlite3 for SQLite)
DB_TYPE=pg

# --- Node.js App Configuration ---

# API Server Port
PORT=3000

# GoTrue URL (where your app connects to auth service)
# Development: http://localhost:9999 (Docker GoTrue)
# Production: https://auth.yourdomain.com
GOTRUE_URL=http://localhost:9999

# Database URL (for production - Supabase/PostgreSQL connection string)
# For local Docker: postgresql://postgres:postgres@localhost:5432/scaffold
# For Supabase: Get this from your Supabase project settings
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/scaffold

# Logging targets
PINO_TRANSPORT_TARGETS=console

# --- Docker/PostgreSQL Configuration ---
POSTGRES_EXTERNAL_PORT=5432

# --- Docker/Redis Configuration ---
REDIS_HOST=localhost
REDIS_HOST_PORT=6379
REDIS_PASSWORD=redis_dev_password

# --- Docker/GoTrue Configuration ---

# Site Configuration
GOTRUE_HOST_PORT=9999
SITE_URL=http://localhost:3000
URI_ALLOW_LIST=http://localhost:3000,http://localhost:9999

# JWT Secret (CHANGE THIS IN PRODUCTION!)
# Generate with: openssl rand -base64 32
JWT_SECRET=$(openssl rand -base64 32)

# --- PostgreSQL Configuration ---
POSTGRES_DB=scaffold
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# --- GoTrue Configuration ---

# Email Configuration
MAILER_AUTOCONFIRM=true  # Set to false to require email confirmation (CHANGED to send emails!)
DISABLE_SIGNUP=false

# SMTP Configuration (Required if MAILER_AUTOCONFIRM=false)
# For Gmail: Use App Password (https://myaccount.google.com/apppasswords)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_ADMIN_EMAIL=your-email@gmail.com

# OAuth Providers (Optional - set ENABLED=true and add credentials)
GOOGLE_ENABLED=false
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:9999/callback

GITHUB_ENABLED=false
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_REDIRECT_URI=http://localhost:9999/callback

# --- Docker/MinIO Configuration ---
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# --- Storage Service Configuration ---
STORAGE_TYPE=minio
MINIO_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=photos
MINIO_USE_SSL=false